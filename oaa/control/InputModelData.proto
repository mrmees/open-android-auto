// Android Auto Protocol Buffer Definitions
// https://github.com/mrmees/open-android-auto
// SPDX-License-Identifier: GPL-3.0-or-later

/*
 * Input model and capability connection config messages (proto3).
 *
 * These are sub-messages referenced by PhoneCapabilities and related
 * capability negotiation. All confirmed proto3 per APK descriptors.
 *
 * APK classes (AA v16.1):
 *   CapabilityConnectionConfig = aahf (2 fields: 2 messages)
 *   InputModelEntry = aafs (4 fields: 3 strings + 1 packed enum)
 *   InputModelDescriptor = aahd (2 fields: string + bytes)
 *   HandwritingInputModelConfig = aahi (5 fields: 2 msgs + string + packed enum + string)
 */

syntax="proto3";

package oaa.proto.data;

// APK class: aahf — connection config with two sub-messages
message CapabilityConnectionConfig
{
    CapabilityConnectionEntry entry_a = 1;
    CapabilityConnectionEntry entry_b = 2;
}

// Placeholder for CapabilityConnectionConfig sub-message fields
message CapabilityConnectionEntry {}

// APK class: aahd — describes an input model (name + serialized descriptor)
message InputModelDescriptor
{
    string model_name = 1;
    bytes model_data = 2;
}

// APK class: aafs — input model entry (4 fields)
message InputModelEntry
{
    string entry_name = 1;
    string entry_type = 2;
    string entry_value = 3;
    repeated InputModelEnum model_flags = 4 [packed = true];
}

// Placeholder enum for InputModelEntry field 4
enum InputModelEnum {
    INPUT_MODEL_UNKNOWN = 0;
}

// APK class: aahi — handwriting input model configuration (5 fields)
message HandwritingInputModelConfig
{
    InputModelDescriptor descriptor = 1;     // field 1: message
    InputModelDescriptor alt_descriptor = 2; // field 2: message
    string config_name = 3;                  // field 3: string
    repeated InputModelEnum config_flags = 4 [packed = true]; // field 4: packed enum
    string config_value = 5;                 // field 5: string
}
