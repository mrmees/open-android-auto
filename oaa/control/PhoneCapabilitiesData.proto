// Android Auto Protocol Buffer Definitions
// https://github.com/mrmees/open-android-auto
// SPDX-License-Identifier: GPL-3.0-or-later

/*
 * Discovered via APK proto decoder (aagr.java, AA v16.1)
 * Sub-message of ServiceDiscoveryRequest field 2.
 * Describes phone capabilities, device info, and connection preferences.
 *
 * Proto3 capability types (CapabilityEntry, CapabilityFlag, CapabilityPair,
 * PingConfigPair) split to CapabilityData.proto.
 */

syntax="proto2";

import "oaa/control/CapabilityData.proto";

package oaa.proto.data;

message PhoneCapabilities
{
    optional CapabilityFlag feature_flags = 1;
    optional DeviceInfo device_info = 2;
    optional PhoneConnectionConfig connection_config = 3;
    optional CapabilityPair display_capabilities = 4;
    repeated CapabilityEntry capabilities = 5;
    optional string phone_identifier = 7;
}

// APK class: vve — phone device information (9 fields)
message DeviceInfo
{
    optional string manufacturer = 1;
    optional string model = 2;
    optional string android_version = 3;
    optional string build_fingerprint = 4;
    optional string field_5 = 5;
    optional string field_6 = 6;
    optional string field_7 = 7;
    optional string field_8 = 8;
    optional int32 device_type = 9;
}

// WiFi security mode (APK enum: wdr)
// Used for WiFi Direct connection between phone and HU.
enum WifiSecurityMode {
    WIFI_SECURITY_UNKNOWN = 0;
    WIFI_SECURITY_OPEN = 1;
    WIFI_SECURITY_WEP_64 = 2;
    WIFI_SECURITY_WEP_128 = 3;
    WIFI_SECURITY_WPA_PERSONAL = 4;
    WIFI_SECURITY_WPA2_PERSONAL = 8;
    WIFI_SECURITY_WPA_WPA2_PERSONAL = 12;
    WIFI_SECURITY_WPA_ENTERPRISE = 20;
    WIFI_SECURITY_WPA2_ENTERPRISE = 24;
    WIFI_SECURITY_WPA_WPA2_ENTERPRISE = 28;
    WIFI_SECURITY_WPA3_PERSONAL = 32;
    WIFI_SECURITY_WPA2_WPA3_PERSONAL = 40;
}

// WiFi access point type (APK class: wdm, field 5)
enum WifiAccessPointType {
    WIFI_AP_STATIC = 0;
    WIFI_AP_DYNAMIC = 1;
}

// APK class: wdm — phone connection config (WiFi info)
message PhoneConnectionConfig
{
    optional string ssid = 1;
    optional string bssid = 2;
    optional string passphrase = 3;
    optional WifiSecurityMode security_mode = 4;
    optional WifiAccessPointType ap_type = 5;
}
