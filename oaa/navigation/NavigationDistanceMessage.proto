// Android Auto Protocol Buffer Definitions
// https://github.com/mrmees/open-android-auto
// SPDX-License-Identifier: GPL-3.0-or-later

syntax = "proto2";

package oaa.proto.messages;

import "oaa/navigation/NavigationDistanceDisplayData.proto";

// APK class: xnb — Navigation distance/ETA update (msgId 0x8007 on Nav channel)
// Sent periodically by phone during active navigation
message NavigationDistance {
    required data.NavigationDistanceValue distance = 1;  // APK: xmw — required per descriptor
    required string eta_text = 2;                        // APK: required
    required int32 eta_seconds = 3;                      // APK: required
    optional NavigationDistanceInfo info = 8;             // APK: xng
}

// APK class: xng — groups distance displays and alternates
message NavigationDistanceInfo {
    optional data.NavigationDistanceDisplay display = 1;          // APK: xnd
    repeated data.NavigationDistanceDisplay alternate_display = 2; // APK: repeated xnd
    oneof oneof_display_wrapper {
        NavigationDistanceOneof oneof_display = 4;               // APK: xne (oneof)
    }
}

// APK class: xne — wrapper for repeated distance entries
message NavigationDistanceOneof {
    repeated NavigationDistanceEntry entries = 1;  // APK: repeated xnf
}

// APK class: xnf — single distance entry (display + metadata)
message NavigationDistanceEntry {
    optional data.NavigationDistanceDisplay display = 1;  // APK: xnd
    optional int32 value = 2;
    repeated int32 metadata = 3 [packed = true];
}
